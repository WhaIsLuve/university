# АЛУ(арифметико-логическое устройство)
## ОПБ(операционный блок)
- Выполняет арифметические и логические операции поданными на вход операндами. Выбор конкретной операции определяется кодом операции, который поступает из регистра команд(РК). В реальных машинах код операции иногда преобразуется в микропрограммном автомате(МПА) в иную форму и уже оттуда поступает в ОПВ(операционный ввод). 
- Х и У - регистры операндов, которые обеспечивают сохранение операндов на входе ОПБ до получения результата операции и его записи.
- **РПрз(регистр признаков)** - предназначен для фиксации и хранения флагов, характеризующих результат последней выполненной операцией. Под каждый флаг отводится один разряд РПрз. Содержимое РПрз используется в УП для реализации условных переходов. Формирование признаков осуществляется блоком формирования состояние РПрз, который может входить в состав ОПБ, либо реализуется в виде внешней схемы, расположенной между ОПБ и РПрз.
- Акк(аккумулятор) - выполняет множество функций. Например, в него может предварительно загружаться один из операндов. Может храниться результат предыдущей операции. Через часто происходит операции IO.
- ОП(основная память) - представляет собой массив запоминающих элементов, организованных в виде ячеек, способных хранить некоторую единицу информации, обычно это байт. Ячейки Оп организованны в виде матрицы и выбор ячейки осуществляется путем подачи разрешающих сигналов на соответствующую строку или столбец. Это обеспечивается дешифратором адреса памяти, преобразующим поступившей из РАП(регистр адреса памяти) в адрес ячейки. Для реализации данных сигналов используется несколько микросхем ЗУ. Тогда процесс обращения к ячейки состоит из выбора нужной микросхемы(старший разряда адреса) и выбора ячейки внутри микросхемы(младший разряд адреса).
- Устройство ввода-вывода(IO/УВВ). Задачи УВВ является обеспечением подключения к ВМ различных периферийных устройств и обмен информации между ними.
- ДВВ(дешифратор ввода-вывода). Обеспечивает преобразования номера порта в сигнал, разрешающих операции ввода и вывода. Ввод или вывода происходит при поступлении разрешающего управляющего сигнала из МПА.
- Порт - это схема, ответственная за передачу информации из периферийного устройства в аккумулятор(порт ввода), или из аккумулятора на периферийное устройства вывода(порт вывода).

Стандартный цикл команды в общем случае состоит из 7 этапов.
- 1 этап - выборка команды
	ЦП - центральный процессор извлекает команду из памяти, используя адрес, хранящийся в СК. Двоичный код команды помещается в РК и с этого момента становится видимым процессору. В РК должен быть помещен полный код команды. Информация о фактической длине команды содержится в полях кода операции и адреса.
- 2 этап - формирование адреса следующей команды
	Соседние команды находятся в смежных ячейках памяти и для получения адреса следующей команды достаточно увеличить СК на длину текущей команды. Если извлеченная команда способна изменить последовательность выполнения программы, то процесс формирования адреса следующей команды переносится на этап исполнения операции. 
- 3 этап - декодирование команды
	ЦП на этом этапе расшифровывает находящийся в РК код операции и выясняет следующие моменты:
		1. Находится ли в РК полный код команды
		2. Какие действия нужны для выполнения команды
		3. Откуда должны быть взяты операнды
		4. Куда они должны быть записаны
	По результатам декодирования производится подготовка электронных схем машины для выполнения операции
- 4 этап - вычисление адресов операндов
	Осуществляется, если команды используют операнды. Если операнды помещаются в основной памяти, то на этом этапе выполняется вычисление их исполнительных адресов, с учетом указанного в команде способа адресации
- 5 этап - выборка операндов
	На этапе выборке операндов, операнды считываются из памяти и заносятся в определенный регистр АЛУ.
- 6 этап - исполнение операции
	На этапе исполнения операции реализуется указанная операция
- 7 этап - запись результата
	На этапе записи результата присутствует в цикле тех команд, которые предполагают занесение результата в регистр или ячейки памяти.
В зависимости от типа команды некоторые этапы могут отсутствовать. Однако, 1, 2, 3 и 6 этапы присутствуют всегда. В определенных ситуациях возможны еще 2 этапа:
- косвенная адресация
- реакция на прерывание
В простейшем случае в адресном поле указывается исполнительный адрес, соответствующей в ячейки памяти. Часто используется косвенная адресация. Это когда адрес операнда хранится в какой-то ячейке, а в команде указывается адрес ячейки, содержащий адрес операнда. Чтобы прочитать операнд сначала нужно извлечь его адрес из памяти и только после этого произвести нужное действие(Т. е. выполняется два обращения к памяти). Практически во всех ВМ предусмотрено средство, позволяющие некотором устройствам прерывать выполнение текущей программы для внеочередного выполнения другой программы с последующим возвратом к прерванной. 
В терминах цикла команды:
1. При наличии запроса ЦП приостанавливает выполнение текущей программы и запоминает содержимое всех регистров, которые будут использоваться программой обработки прерываний. Это называется сохранение контекста программы. В первую очередь необходимо сохранять содержимое СК, аккумулятора, РПрз. Контекст программы обычно сохраняется в стеке.
2. ЦП заносит в СК начальный адрес программы обработки прерываний.
3. Далее процессор продолжает цикл с этапа выборки первой команды обработчика. Обработчик, который входит в состав ОС определяет природу прерывания и выполняет необходимое действие.
4. Когда программа обработка прерывания завершена, процессор возобновляет выполнения программы пользователя, восстанови из стека контекст программы.
# Система команд процессора
Каждый процессор имеет собственный вполне определенный набор команд. Система команд должна обладать 2 св-ми:
1. Функциональная полнота - достаточность системы команд для описания любого алгоритма. Доказано, что свойствами функциональной полноты обладает система, включающая 3 команды(система Коста):
	- Присвоение 1
	- Присвоение 0
	- Сравнение с 0
2. Эффективность. Степень соответствия системы команд назначению ЭВМ и требованию к производительностью.
Реализация развитой системой команд связана с большими затратами оборудования и высокой стоимостью процессора. В то же время ограниченный набор команд приводит к снижению производительности и повышенных требованиям в памяти для размещения программы
Система команд процессора характеризуется тремя аспектами:
- Форматами 
- Способами адресации
- Системой операций
---ТУТ ДОЛЖНА БЫТЬ ФОТКА---
Форматы команд:
Машинные команды занимают от 1 до 6 байтов. Код операции занимает один/два первых байта. Т.к. операций слишком много, то для низ не хватает 256-ти различных кодов, поэтому некоторые операции объединяются в группу, и им дается один и тот же код операции, а во втором байте он уточняется. Также во втором байте указываются типы операндов.
